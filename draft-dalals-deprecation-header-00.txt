



Network Working Group                                           S. Dalal
Internet-Draft
Intended status: Standards Track                                E. Wilde
Expires: August 17, 2019                               February 13, 2019


                      The Deprecation HTTP Header
                   draft-dalals-deprecation-header-00

Abstract

   The HTTP Deprecation response header can be used to signal to
   consumers of a URI-identified resource that the use of the resource
   has been deprecated.  Additionally, the deprecation link relation can
   be used to link to a resource that provides additional context for
   the deprecation, and possibly ways in which clients can find a
   replacement for the deprecated resource.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on August 17, 2019.

Copyright Notice

   Copyright (c) 2019 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (https://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of




Dalal & Wilde            Expires August 17, 2019                [Page 1]

Internet-Draft         The Deprecation HTTP Header         February 2019


   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
     1.1.  Notational Conventions  . . . . . . . . . . . . . . . . .   3
   2.  The Deprecation HTTP Response Header Field  . . . . . . . . .   3
     2.1.  Members of Deprecation Header Field . . . . . . . . . . .   3
       2.1.1.  Version . . . . . . . . . . . . . . . . . . . . . . .   3
       2.1.2.  Date  . . . . . . . . . . . . . . . . . . . . . . . .   3
       2.1.3.  Sunset (optional) . . . . . . . . . . . . . . . . . .   4
     2.2.  More Information  . . . . . . . . . . . . . . . . . . . .   4
     2.3.  Recommend Replacement . . . . . . . . . . . . . . . . . .   5
   3.  The Deprecation Link Relation Type  . . . . . . . . . . . . .   6
   4.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   6
     4.1.  The Deprecation Response Header Field . . . . . . . . . .   6
     4.2.  The Deprecation Link Relation Type  . . . . . . . . . . .   6
   5.  Implementation Status . . . . . . . . . . . . . . . . . . . .   6
   6.  Security Considerations . . . . . . . . . . . . . . . . . . .   7
   7.  Example . . . . . . . . . . . . . . . . . . . . . . . . . . .   8
   8.  References  . . . . . . . . . . . . . . . . . . . . . . . . .   8
     8.1.  Normative References  . . . . . . . . . . . . . . . . . .   8
     8.2.  Informative References  . . . . . . . . . . . . . . . . .   9
   Acknowledgments . . . . . . . . . . . . . . . . . . . . . . . . .  10
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .  10

1.  Introduction

   [Deprecation] of a URI-identified resource is a technique to
   communicate information about the life cycle of a resource: to
   encourage client applications to migrate away from the resource, to
   discourage applications from forming new dependencies on the
   resource, and to inform developers of the risks of continuing
   dependence upon the resource.  The act of deprecation does not change
   any behavior of the resource.  It just informs the clients of the
   fact.

   Deprecation HTTP response header MUST be used to convey this fact at
   runtime to the clients.  This header could carry additional
   information such as since when the deprecation is in effect, what is
   the alternate(s) if any, and possibly when the deprecated resource
   would be unreachable (or sunset).  Alternates of a resource could be
   similar resource(s) or a later version of the same resource.







Dalal & Wilde            Expires August 17, 2019                [Page 2]

Internet-Draft         The Deprecation HTTP Header         February 2019


1.1.  Notational Conventions

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and
   "OPTIONAL" in this document are to be interpreted as described in BCP
   14 [RFC2119] [RFC8174] when, and only when, they appear in all
   capitals, as shown here.

2.  The Deprecation HTTP Response Header Field

   The "Deprecation" HTTP response header field allows a server to
   communicate to a client that the URI-identified resource involved in
   a request and/or response is deprecated.  It could also provide
   information that the resource is deprecated since which version and
   optionally when it is expected to become unresponsive.

2.1.  Members of Deprecation Header Field

   The value of "Deprecation" header field could consist of at most 3
   standard properties: "date", "version" and "sunset" as shown below.
   Either "version" or "date" is REQUIRED, "sunset" is OPTIONAL.

   Deprecation: version=<version>; date=<date>; sunset=<sunset date>;

2.1.1.  Version

   The value of the "version" property, if present, could be the
   deprecated version of the resource.  For resources that use date-
   based versioning scheme, the value would be accordingly.

   Following example indicates that the version v1 of the resource in
   context is deprecated.

   Deprecation: version=v1

   Following example shows that the version 2018-11-08 (November 8,
   2018) of the resource in context is deprecated.  Here the versioning
   scheme used is date-based.

   Deprecation: version=2018-11-08

2.1.2.  Date

   The value of "date" property, if present, would be the date when
   resource was deprecated.  It would be in the form of an HTTP-date
   timestamp, as defined in Section 7.1.1.1 of [RFC7231].





Dalal & Wilde            Expires August 17, 2019                [Page 3]

Internet-Draft         The Deprecation HTTP Header         February 2019


   Following example shows that the resource in context is deprecated on
   Friday, November 11, 2018 at 23:59:59 GMT.

   Deprecation: date=Fri, 11 Nov 2018 23:59:59 GMT

   Date could be in future too.  If the value of "date" is in future, it
   means that the resource will be deprecated on the given date in
   future.

2.1.3.  Sunset (optional)

   The value for "sunset" property would be an HTTP-date timestamp, as
   defined in Section 7.1.1.1 of [RFC7231].  This information provided
   as a hint and allows a service to communicate the fact that a
   resource is expected to become unresponsive at a specific point in
   time.

   Following example indicates that the resource in context has been
   deprecated since version v2 and its sunset date is Friday, November
   11, 2020 at 23:59:59 GMT.

   Deprecation: version=v2; sunset=Fri, 11 Nov 2020 23:59:59 GMT

   Following example shows that the resource in context has been
   deprecated since Friday, November 11, 2018 at 23:59:59 GMT and its
   sunset date is Friday, November 11, 2020 at 23:59:59 GMT.

Deprecation: date=Fri, 11 Nov 2018 23:59:59 GMT; sunset=Fri, 11 Nov 2020 23:59:59 GMT

2.2.  More Information

   For a URI-identified resource, deprecation could involve one or more
   parts of request, response or both.  These parts could be:

   o  URI - deprecation of one ore more query parameter(s) or path
      element(s)

   o  method - HTTP method for the resource is deprecated

   o  request header - one or more HTTP request header(s) is deprecated

   o  response header - HTTP response header(s) is deprecated

   o  request body - request body contains one or more deprecated
      element(s)

   o  response body - response body contains one or more deprecated
      element(s)



Dalal & Wilde            Expires August 17, 2019                [Page 4]

Internet-Draft         The Deprecation HTTP Header         February 2019


   The purpose of the "Deprecation" header is to provide just enough
   "hints" about deprecation to the client application developer.  It is
   safe to assume that on reception of the "Deprecation" header, the
   client developer would try to look for documentation related to
   deprecation of the resource.

   In order to improve the client developer's experience, the resource
   developer could provide a link to the documentation using a "Link"
   header [RFC8288] with relationship type "describedby"
   <http://www.w3.org/TR/powder-dr/#assoc-linking> as shown below.
   Here, it is assumed that the content present at
   "https://developer.example.com/v1/customers" is properly annotated to
   show deprecation of the relevant parts.

Deprecation: version=v1
Link: https://developer.example.com/v1/customers; rel=describedby type=text/html

2.3.  Recommend Replacement

   "Link" header could be used in addition to the "Deprecation" header
   to recommend the client application about available alternates to the
   deprecated resource.  Following relationship types as defined in
   [RFC5988] are RECOMMENDED to use for the purpose.

   o  "successor-version": Points to a resource containing the successor
      version.  [RFC5829]

   o  "latest-version": Points to a resource containing the latest
      (e.g., current) version.  [RFC5829]

   o  "alternate": Designates a substitute.  [W3C.REC-html401-19991224]

   Following example provides link to the successor version of the v1
   version of "customer" resource that is deprecated.

   Deprecation: version=v1
   Link: https://api.example.com/v2/customers; rel=successor-version

   This example provides link to an alternate resource to the "customer"
   resource that is deprecated.

   Deprecation: version=2018-11-11
   Link: https://api.example.com/v1/clients; rel=alternate








Dalal & Wilde            Expires August 17, 2019                [Page 5]

Internet-Draft         The Deprecation HTTP Header         February 2019


3.  The Deprecation Link Relation Type

   In addition to the Deprecation HTTP header, the server could use a
   "Link" header(s) to communicate to the client where to find more
   information about its deprecation policy.

   TBD: Erik?

4.  IANA Considerations

4.1.  The Deprecation Response Header Field

   The "Deprecation" response header should be added to the permanent
   registry of message header fields (see [RFC3864]), taking into
   account the guidelines given by HTTP/1.1 [RFC7231].

   Header Field Name: Deprecation

   Applicable Protocol: Hypertext Transfer Protocol (HTTP)

   Status: Informational

   Author/Change controller: IETF

   Specification document(s): RFC XXXX

4.2.  The Deprecation Link Relation Type

   The "deprecation" link relation type should be added to the permanent
   registry of link relation types according to Section 4.2 of
   [RFC8288]:

   Relation Name: deprecation

   Description: ...

   Reference: RFC XXXX

5.  Implementation Status

   Note to RFC Editor: Please remove this section before publication.

   This section records the status of known implementations of the
   protocol defined by this specification at the time of posting of this
   Internet-Draft, and is based on a proposal described in [RFC6982].
   The description of implementations in this section is intended to
   assist the IETF in its decision processes in progressing drafts to
   RFCs.  Please note that the listing of any individual implementation



Dalal & Wilde            Expires August 17, 2019                [Page 6]

Internet-Draft         The Deprecation HTTP Header         February 2019


   here does not imply endorsement by the IETF.  Furthermore, no effort
   has been spent to verify the information presented here that was
   supplied by IETF contributors.  This is not intended as, and must not
   be construed to be, a catalog of available implementations or their
   features.  Readers are advised to note that other implementations may
   exist.

   According to RFC 6982, "this will allow reviewers and working groups
   to assign due consideration to documents that have the benefit of
   running code, which may serve as evidence of valuable experimentation
   and feedback that have made the implemented protocols more mature.
   It is up to the individual working groups to use this information as
   they see fit".

   Organization: PayPal

   Name: PayPal API Guidelines

   Licensing: OpenSource (https://www.paypal-engineering.com/2017/09/)

   Description: PayPal core capabilities are available from a
   platform of discoverable, well-encapsulated, reusable API-driven
   products. PayPal as a Service (PPaaS) is a micro service platform
   offering a portfolio of 150+ RESTful APIs for use by internal and
   external developers to access several PayPal capabilities. These
   APIs are used by applications including but not limited to
   build.com, Uber, eBay, Venmo, Braintree, Samsung, and numerous
   internal PayPal applications.

   Maturity: Production (internal and external APIs).

   Coverage: HTTP Header for deprecation

   Contact: Nikhil Kolekar (nikhil.kolekar@gmail.com)

6.  Security Considerations

   The content of a "Link" header field is not secure, private or
   integrity-guaranteed, and due caution should be exercised when using
   it.  Use of Transport Layer Security (TLS) with HTTP ([RFC2818] and
   [RFC2817]) is currently the only end-to-end way to provide such
   protection.

   The suggested "Link" header fields make extensive use of IRIs and
   URIs.  See [RFC3987] for security considerations relating to IRIs.
   See [RFC3986] for security considerations relating to URIs.  See
   [RFC2616] for security considerations relating to HTTP headers.




Dalal & Wilde            Expires August 17, 2019                [Page 7]

Internet-Draft         The Deprecation HTTP Header         February 2019


   Applications that take advantage of typed links should consider the
   attack vectors opened by automatically following, trusting, or
   otherwise using links gathered from the HTTP headers.  In particular,
   Link headers that use the "successor-version", "latest-version" or
   "alternate" relation types should be treated with due caution.  See
   [RFC5829] for security considerations relating to these link relation
   types.

7.  Example

   Just deprecation header without any Link headers.

   Deprecation: version=v1

   Deprecation header with link to the successor version.

   Deprecation: version=v1
   Link: https://api.example.com/v2/customers; rel=successor-version

   Deprecation header with links for the successor version and for the
   API developer's deprecation policy.  Also, it shows "sunset" date for
   the deprecated version (v1);

   Deprecation: version=v1; sunset=Fri, 11 Nov 2020 23:59:59 GMT
   Link: https://api.example.com/v2/customers; rel=successor-version
   Link: https://developer.example.com/deprecation; rel=deprecation

8.  References

8.1.  Normative References

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <https://www.rfc-editor.org/info/rfc2119>.

   [RFC2616]  Fielding, R., Gettys, J., Mogul, J., Frystyk, H.,
              Masinter, L., Leach, P., and T. Berners-Lee, "Hypertext
              Transfer Protocol -- HTTP/1.1", RFC 2616,
              DOI 10.17487/RFC2616, June 1999,
              <https://www.rfc-editor.org/info/rfc2616>.

   [RFC2817]  Khare, R. and S. Lawrence, "Upgrading to TLS Within
              HTTP/1.1", RFC 2817, DOI 10.17487/RFC2817, May 2000,
              <https://www.rfc-editor.org/info/rfc2817>.






Dalal & Wilde            Expires August 17, 2019                [Page 8]

Internet-Draft         The Deprecation HTTP Header         February 2019


   [RFC2818]  Rescorla, E., "HTTP Over TLS", RFC 2818,
              DOI 10.17487/RFC2818, May 2000,
              <https://www.rfc-editor.org/info/rfc2818>.

   [RFC3864]  Klyne, G., Nottingham, M., and J. Mogul, "Registration
              Procedures for Message Header Fields", BCP 90, RFC 3864,
              DOI 10.17487/RFC3864, September 2004,
              <https://www.rfc-editor.org/info/rfc3864>.

   [RFC3986]  Berners-Lee, T., Fielding, R., and L. Masinter, "Uniform
              Resource Identifier (URI): Generic Syntax", STD 66,
              RFC 3986, DOI 10.17487/RFC3986, January 2005,
              <https://www.rfc-editor.org/info/rfc3986>.

   [RFC3987]  Duerst, M. and M. Suignard, "Internationalized Resource
              Identifiers (IRIs)", RFC 3987, DOI 10.17487/RFC3987,
              January 2005, <https://www.rfc-editor.org/info/rfc3987>.

   [RFC5829]  Brown, A., Clemm, G., and J. Reschke, Ed., "Link Relation
              Types for Simple Version Navigation between Web
              Resources", RFC 5829, DOI 10.17487/RFC5829, April 2010,
              <https://www.rfc-editor.org/info/rfc5829>.

   [RFC5988]  Nottingham, M., "Web Linking", RFC 5988,
              DOI 10.17487/RFC5988, October 2010,
              <https://www.rfc-editor.org/info/rfc5988>.

   [RFC7231]  Fielding, R., Ed. and J. Reschke, Ed., "Hypertext Transfer
              Protocol (HTTP/1.1): Semantics and Content", RFC 7231,
              DOI 10.17487/RFC7231, June 2014,
              <https://www.rfc-editor.org/info/rfc7231>.

   [RFC8174]  Leiba, B., "Ambiguity of Uppercase vs Lowercase in RFC
              2119 Key Words", BCP 14, RFC 8174, DOI 10.17487/RFC8174,
              May 2017, <https://www.rfc-editor.org/info/rfc8174>.

   [RFC8288]  Nottingham, M., "Web Linking", RFC 8288,
              DOI 10.17487/RFC8288, October 2017,
              <https://www.rfc-editor.org/info/rfc8288>.

8.2.  Informative References

   [Deprecation]
              Marks, S., "JEP 277 - Enhanced Deprecation", 2017,
              <http://openjdk.java.net/jeps/277>.






Dalal & Wilde            Expires August 17, 2019                [Page 9]

Internet-Draft         The Deprecation HTTP Header         February 2019


   [RFC6982]  Sheffer, Y. and A. Farrel, "Improving Awareness of Running
              Code: The Implementation Status Section", RFC 6982,
              DOI 10.17487/RFC6982, July 2013,
              <https://www.rfc-editor.org/info/rfc6982>.

Acknowledgments

   The authors would like to thank Mark Nottingham, Nikhil Kolekar, ...
   for review of this specification.  The authors take all
   responsibility for errors and omissions.

Authors' Addresses

   Sanjay Dalal

   Email: sanjay.dalal@cal.berkeley.edu
   URI:   https://github.com/sdatspun2


   Erik Wilde

   Email: erik.wilde@dret.net
   URI:   http://dret.net/netdret




























Dalal & Wilde            Expires August 17, 2019               [Page 10]
